<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ä»»åŠ¡ç®¡ç†ç³»ç»Ÿ - é«˜æ•ˆç®¡ç†æ‚¨çš„æ—¥å¸¸ä»»åŠ¡">
    <meta name="keywords" content="ä»»åŠ¡ç®¡ç†,å¾…åŠäº‹é¡¹,æ—¶é—´ç®¡ç†,é¡¹ç›®ç®¡ç†">
    <title>ä»»åŠ¡ç®¡ç† - æˆ‘çš„ä¸ªäººç«™ç‚¹</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="task.css">
</head>
<body>
    <nav>
        <a href="index.html">ğŸ  é¦–é¡µ</a>
        <a href="travel.html">ğŸš— å‡ºè¡Œç§˜ä¹¦</a>
        <a href="advisor.html">ğŸ“Š æˆ˜ç•¥é¡¾é—®</a>
        <a href="discipline.html">ğŸ¯ çºªå¾‹æ•™ç»ƒ</a>
        <a href="planner.html">ğŸ“˜ å­¦ä¹ è§„åˆ’å¸ˆ</a>
        <a href="study-partner.html">ğŸ¤ å­¦ä¹ ä¼™ä¼´</a>
        <a href="task.html" class="nav-active">âœ… ä»»åŠ¡ç®¡ç†</a>
        <div class="dropdown">
            <button class="dropbtn">ğŸ“‘ æ›´å¤šåŠŸèƒ½ â–¾</button>
            <div class="dropdown-content">
                <a href="task-analytics.html">ğŸ“Š ç»Ÿè®¡åˆ†æ</a>
                <a href="task-calendar.html">ğŸ“… æ—¥ç¨‹è§„åˆ’</a>
                <a href="task-team.html">ğŸ‘¥ å›¢é˜Ÿåä½œ</a>
                <a href="task-project.html">ğŸ“‹ é¡¹ç›®ç®¡ç†</a>
                <a href="task-time.html">â±ï¸ æ—¶é—´è¿½è¸ª</a>
            </div>
        </div>
    </nav>

    <main class="container">
        <section class="section active">
            <h1>ä»»åŠ¡ç®¡ç†</h1>
            
            <div class="task-nav">
                <button class="nav-btn active" data-filter="all">ğŸ“‹ å…¨éƒ¨</button>
                <button class="nav-btn" data-filter="today">ğŸ“… ä»Šå¤©</button>
                <button class="nav-btn" data-filter="important">â­ é‡è¦</button>
                <div class="filter-wrapper">
                    <div class="filter-container">
                        <button class="filter-main-btn">
                            <i class="fas fa-filter"></i> é«˜çº§ç­›é€‰
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="filter-menu">
                            <div class="filter-item">
                                <div class="filter-item-header">
                                    <i class="far fa-clock"></i>
                                    <span>æŒ‰æ—¶é—´ç­›é€‰</span>
                                    <i class="fas fa-chevron-right"></i>
                                </div>
                                <div class="filter-submenu">
                                    <button onclick="setFilter('all')" class="filter-btn active" data-filter="all">å…¨éƒ¨</button>
                                    <button onclick="setFilter('today')" class="filter-btn" data-filter="today">ä»Šå¤©</button>
                                    <button onclick="setFilter('week')" class="filter-btn" data-filter="week">æœ¬å‘¨</button>
                                </div>
                            </div>
                            <div class="filter-item">
                                <div class="filter-item-header">
                                    <i class="fas fa-tasks"></i>
                                    <span>æŒ‰çŠ¶æ€ç­›é€‰</span>
                                    <i class="fas fa-chevron-right"></i>
                                </div>
                                <div class="filter-submenu">
                                    <button onclick="setFilter('pending')" class="filter-btn" data-filter="pending">å¾…å¤„ç†</button>
                                    <button onclick="setFilter('completed')" class="filter-btn" data-filter="completed">å·²å®Œæˆ</button>
                                    <button onclick="setFilter('important')" class="filter-btn" data-filter="important">é‡è¦</button>
                                </div>
                            </div>
                            <div class="filter-item">
                                <div class="filter-item-header">
                                    <i class="fas fa-flag"></i>
                                    <span>æŒ‰ä¼˜å…ˆçº§ç­›é€‰</span>
                                    <i class="fas fa-chevron-right"></i>
                                </div>
                                <div class="filter-submenu">
                                    <button onclick="setFilter('high')" class="filter-btn" data-filter="high">é«˜ä¼˜å…ˆçº§</button>
                                    <button onclick="setFilter('medium')" class="filter-btn" data-filter="medium">ä¸­ä¼˜å…ˆçº§</button>
                                    <button onclick="setFilter('low')" class="filter-btn" data-filter="low">ä½ä¼˜å…ˆçº§</button>
                                </div>
                            </div>
                            <div class="filter-item">
                                <div class="filter-item-header">
                                    <i class="fas fa-tags"></i>
                                    <span>æŒ‰åˆ†ç±»ç­›é€‰</span>
                                    <i class="fas fa-chevron-right"></i>
                                </div>
                                <div class="filter-submenu">
                                    <select id="categoryFilter" onchange="filterByCategory(this.value)">
                                        <option value="all">æ‰€æœ‰åˆ†ç±»</option>
                                        <option value="å·¥ä½œ">å·¥ä½œ</option>
                                        <option value="å­¦ä¹ ">å­¦ä¹ </option>
                                        <option value="ç”Ÿæ´»">ç”Ÿæ´»</option>
                                        <option value="å¥åº·">å¥åº·</option>
                                        <option value="å…¶ä»–">å…¶ä»–</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <form id="taskForm" class="task-form">
                <div class="form-group">
                    <input type="text" id="taskInput" placeholder="è¾“å…¥æ–°ä»»åŠ¡..." required>
                </div>
                <div class="form-group">
                    <input type="text" id="taskCategory" list="categoryList" placeholder="é€‰æ‹©æˆ–è¾“å…¥åˆ†ç±»">
                    <datalist id="categoryList">
                        <option value="å·¥ä½œ">
                        <option value="å­¦ä¹ ">
                        <option value="ç”Ÿæ´»">
                        <option value="å¥åº·">
                        <option value="å…¶ä»–">
                    </datalist>
                </div>
                <div class="form-group">
                    <select id="taskPriority" required>
                        <option value="" disabled selected>é€‰æ‹©ä¼˜å…ˆçº§</option>
                        <option value="high">é«˜</option>
                        <option value="medium">ä¸­</option>
                        <option value="low">ä½</option>
                    </select>
                </div>
                <div class="form-group">
                    <input type="date" id="taskDueDate" title="è®¾ç½®æˆªæ­¢æ—¥æœŸ">
                </div>
                <button type="submit">æ·»åŠ ä»»åŠ¡</button>
            </form>

            <div class="filter-overlay"></div>

            <div class="task-stats">
                <div class="stat-item">
                    <span class="stat-label">æ€»ä»»åŠ¡:</span>
                    <span class="stat-value" id="totalTasks">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">å·²å®Œæˆ:</span>
                    <span class="stat-value" id="completedTasks">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">å¾…å¤„ç†:</span>
                    <span class="stat-value" id="pendingTasks">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">é‡è¦ä»»åŠ¡:</span>
                    <span class="stat-value" id="importantTasks">0</span>
                </div>
            </div>

            <ul id="TaskList"></ul>
        </section>
    </main>

    <script src="task.js"></script>
    <script>
        // æ‰€æœ‰ç­›é€‰å™¨ç›¸å…³é€»è¾‘å·²ç»Ÿä¸€åœ¨task.jsä¸­å¤„ç†
    </script>
<script>
// æµ‹è¯•å·¥å…·å¯¹è±¡
const TestUtils = {
    // æ£€æŸ¥å…ƒç´ å¯è§æ€§
    isVisible: function(element) {
        return element && (element.offsetParent !== null || getComputedStyle(element).display !== 'none');
    },
    
    // æ¨¡æ‹Ÿç§»åŠ¨ç«¯ç¯å¢ƒ
    simulateMobile: function() {
        Object.defineProperty(window, 'innerWidth', {
            writable: true,
            configurable: true,
            value: 375
        });
        window.dispatchEvent(new Event('resize'));
    },
    
    // æ¢å¤æ¡Œé¢ç¯å¢ƒ
    simulateDesktop: function() {
        Object.defineProperty(window, 'innerWidth', {
            writable: true,
            configurable: true,
            value: 1024
        });
        window.dispatchEvent(new Event('resize'));
    },
    
    // ç­‰å¾…æŒ‡å®šæ—¶é—´
    wait: function(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
    },
    
    // æ¸…ç†æµ‹è¯•çŠ¶æ€
    cleanup: function() {
        const filterBtn = document.querySelector('.filter-main-btn');
        const filterMenu = document.querySelector('.filter-menu');
        const overlay = document.querySelector('.filter-overlay');
        const submenus = document.querySelectorAll('.filter-submenu');
        
        filterBtn?.classList.remove('active');
        filterMenu?.classList.remove('active');
        overlay?.classList.remove('active');
        submenus.forEach(submenu => submenu.classList.remove('active'));
    }
};

// æµ‹è¯•ç”¨ä¾‹
async function runFilterTests() {
    console.group('ç­›é€‰å™¨åŠŸèƒ½æµ‹è¯•');
    try {
        // åˆå§‹çŠ¶æ€æµ‹è¯•
        console.log('1. æµ‹è¯•åˆå§‹çŠ¶æ€...');
        const filterBtn = document.querySelector('.filter-main-btn');
        const filterMenu = document.querySelector('.filter-menu');
        const overlay = document.querySelector('.filter-overlay');
        
        console.assert(!TestUtils.isVisible(filterMenu), 'èœå•åˆå§‹åº”è¯¥æ˜¯éšè—çš„');
        console.assert(!TestUtils.isVisible(overlay), 'é®ç½©å±‚åˆå§‹åº”è¯¥æ˜¯éšè—çš„');
        
        // PCç«¯æµ‹è¯•
        console.log('2. æµ‹è¯•PCç«¯åŠŸèƒ½...');
        TestUtils.simulateDesktop();
        
        // æµ‹è¯•æŒ‰é’®ç‚¹å‡»
        filterBtn.click();
        await TestUtils.wait(100);
        console.assert(filterBtn.classList.contains('active'), 'æŒ‰é’®åº”è¯¥æœ‰activeç±»');
        console.assert(TestUtils.isVisible(filterMenu), 'èœå•åº”è¯¥å¯è§');
        
        // æµ‹è¯•å­èœå•
        const firstSubmenuHeader = document.querySelector('.filter-item-header');
        firstSubmenuHeader.dispatchEvent(new MouseEvent('mouseenter'));
        await TestUtils.wait(100);
        
        const submenu = firstSubmenuHeader.nextElementSibling;
        console.assert(TestUtils.isVisible(submenu), 'å­èœå•åº”è¯¥åœ¨æ‚¬åœæ—¶æ˜¾ç¤º');
        
        // æµ‹è¯•é€‰é¡¹ç‚¹å‡»
        const filterOption = submenu.querySelector('.filter-btn');
        filterOption.click();
        await TestUtils.wait(100);
        console.assert(filterOption.classList.contains('active'), 'é€‰é¡¹åº”è¯¥è¢«æ¿€æ´»');
        
        // ç§»åŠ¨ç«¯æµ‹è¯•
        console.log('3. æµ‹è¯•ç§»åŠ¨ç«¯åŠŸèƒ½...');
        TestUtils.simulateMobile();
        await TestUtils.wait(300);
        
        TestUtils.cleanup();
        await TestUtils.wait(300);
        
        // æµ‹è¯•ç§»åŠ¨ç«¯èœå•
        filterBtn.click();
        await TestUtils.wait(100);
        console.assert(filterMenu.classList.contains('active'), 'ç§»åŠ¨ç«¯èœå•åº”è¯¥æ˜¾ç¤º');
        console.assert(overlay.classList.contains('active'), 'ç§»åŠ¨ç«¯é®ç½©å±‚åº”è¯¥æ˜¾ç¤º');
        
        // æµ‹è¯•ç§»åŠ¨ç«¯å­èœå•
        firstSubmenuHeader.click();
        await TestUtils.wait(100);
        console.assert(submenu.classList.contains('active'), 'ç§»åŠ¨ç«¯å­èœå•åº”è¯¥å±•å¼€');
        
        // æµ‹è¯•ç§»åŠ¨ç«¯å…³é—­
        overlay.click();
        await TestUtils.wait(300);
        console.assert(!filterMenu.classList.contains('active'), 'ç‚¹å‡»é®ç½©å±‚åº”è¯¥å…³é—­èœå•');
        
        console.log('âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼');
        
    } catch (error) {
        console.error('âŒ æµ‹è¯•å¤±è´¥:', error);
    } finally {
        TestUtils.cleanup();
        TestUtils.simulateDesktop();
        console.groupEnd();
    }
}

// é¡µé¢åŠ è½½å®Œæˆåè¿è¡Œæµ‹è¯•
document.addEventListener('DOMContentLoaded', function() {
    console.log('é¡µé¢åŠ è½½å®Œæˆï¼Œå‡†å¤‡æµ‹è¯•...');
    setTimeout(runFilterTests, 1000);
});
</script>
    <footer>
        <div class="footer-links">
            <a href="blog.html">ğŸ“ ä¸ªäººåšå®¢</a>
            <a href="about.html">â„¹ï¸ å…³äºæˆ‘ä»¬</a>
        </div>
    </footer>
</body>
</html>